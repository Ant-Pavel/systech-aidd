# ADR 0001: Frontend Tech Stack - Next.js + TypeScript + shadcn/ui + Tailwind CSS

**Статус:** Принято  
**Дата:** 2025-10-17  
**Контекст:** Спринт F-S2 - Инициализация Frontend проекта

## Контекст и проблема

Для дашборда статистики и веб-чата требуется выбрать оптимальный технологический стек frontend, который:

- Обеспечивает быструю разработку UI
- Поддерживает TypeScript для безопасности типов
- Имеет современные возможности стилизации
- Предоставляет готовые доступные (accessible) компоненты
- Легко масштабируется и поддерживается
- Соответствует принципу KISS

## Рассмотренные варианты

### 1. Create React App + Material-UI

**Плюсы:**
- Готовая библиотека компонентов
- Большое сообщество
- Хорошая документация

**Минусы:**
- CRA устарел и больше не рекомендуется React командой
- Material-UI тяжеловесный (большой bundle size)
- Сложная кастомизация стилей
- Нет встроенной поддержки SSR

### 2. Vite + React + Ant Design

**Плюсы:**
- Быстрая сборка через Vite
- Ant Design - богатая библиотека компонентов
- Хорошая производительность

**Минусы:**
- Ant Design имеет специфический китайский дизайн
- Сложная кастомизация под свой бренд
- Нет встроенной поддержки SSR
- Больший learning curve

### 3. Next.js + shadcn/ui + Tailwind CSS (Выбрано)

**Плюсы:**
- ✅ Next.js - индустриальный стандарт для React приложений
- ✅ SSR/SSG из коробки для оптимизации производительности
- ✅ Отличная интеграция с TypeScript
- ✅ shadcn/ui - копируемые компоненты (не библиотека)
- ✅ Полный контроль над компонентами
- ✅ Tailwind CSS - utility-first подход к стилизации
- ✅ Быстрая разработка UI
- ✅ Доступные компоненты на базе Radix UI
- ✅ Простая кастомизация и расширение

**Минусы:**
- Требуется изучение Next.js специфики
- Tailwind CSS utility-first подход может быть непривычен

## Решение

**Выбран вариант 3: Next.js + shadcn/ui + Tailwind CSS + pnpm**

### Компоненты решения

#### Next.js (Pages Router)

- **Версия:** 15+
- **Router:** Pages Router (не App Router)
- **Причина выбора Pages Router:** Более стабильный, проверенный временем, меньше breaking changes
- **SSR/SSG:** Возможность оптимизации производительности
- **API Routes:** Для проксирования запросов к backend (если понадобится)

#### TypeScript

- **Strict mode enabled** - максимальная безопасность типов
- **Path aliases** (`@/*`) - удобные импорты
- **Type-first подход** - все компоненты и функции типизированы

#### shadcn/ui

- **Copy-paste компоненты** - не npm пакет, а набор копируемых компонентов
- **Radix UI primitives** - доступные (accessible) компоненты из коробки
- **Tailwind стилизация** - легко кастомизировать под нужды проекта
- **Полный контроль** - можно модифицировать компоненты как угодно
- **Не затягивает лишние зависимости** - устанавливаются только нужные компоненты

#### Tailwind CSS

- **Utility-first** - быстрая разработка без написания CSS
- **Responsive дизайн** - mobile-first breakpoints
- **Dark mode** - class-based темная тема
- **CSS variables** - для динамической кастомизации (совместно с shadcn/ui)
- **PurgeCSS** - автоматическое удаление неиспользуемых стилей

#### pnpm

- **Быстрый** - быстрее npm и yarn
- **Эффективный** - экономит место на диске (symlinks)
- **Строгий** - не позволяет использовать незадекларированные зависимости
- **Монорепо ready** - хорошо работает с workspace (если понадобится)

### Архитектура

```
Next.js App (Pages Router)
    ↓
React Components
    ↓
shadcn/ui Components (Radix UI + Tailwind)
    ↓
Tailwind CSS (utility classes)
```

### Структура проекта

```
frontend/
├── pages/              # Next.js Pages Router
├── components/         # React компоненты
│   └── ui/            # shadcn/ui компоненты
├── lib/               # Утилиты (cn, api client)
├── types/             # TypeScript типы
├── styles/            # Глобальные стили
└── public/            # Статические файлы
```

## Последствия

### Положительные

1. **Быстрая разработка** - shadcn/ui + Tailwind позволяют быстро создавать UI
2. **Полный контроль** - копируемые компоненты можно модифицировать как угодно
3. **Доступность** - Radix UI обеспечивает a11y из коробки
4. **TypeScript safety** - строгая типизация предотвращает ошибки
5. **Production ready** - Next.js проверен в продакшене крупными компаниями
6. **Малый bundle size** - устанавливаются только нужные компоненты
7. **Современный DX** - отличный developer experience

### Отрицательные

1. **Learning curve** - требуется изучение Next.js, Tailwind и shadcn/ui подхода
2. **Maintenance** - копируемые компоненты нужно обновлять вручную
3. **Tailwind verbosity** - много классов в JSX (но это компенсируется скоростью разработки)

### Компромиссы

- Отказались от готовой библиотеки компонентов (Material-UI) в пользу копируемых компонентов для большего контроля
- Выбрали Pages Router вместо App Router для большей стабильности (App Router еще новый)
- Используем Tailwind вместо CSS-in-JS для производительности и простоты

## Альтернативные решения в будущем

Если требования изменятся:

- При необходимости сложных анимаций можно добавить Framer Motion
- Для управления состоянием можно добавить Zustand или Jotai (если Context API не хватит)
- Для работы с API можно добавить React Query/SWR для кеширования
- При росте проекта можно мигрировать на App Router

## Ссылки

- [Next.js Documentation](https://nextjs.org/docs)
- [shadcn/ui Documentation](https://ui.shadcn.com)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [Radix UI Documentation](https://www.radix-ui.com)
- [TypeScript Documentation](https://www.typescriptlang.org/docs)
- [pnpm Documentation](https://pnpm.io)

