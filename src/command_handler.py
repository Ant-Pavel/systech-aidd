"""–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞."""

import logging

from aiogram.types import Message

from src.protocols import ConversationStorageProtocol

logger = logging.getLogger(__name__)


class CommandHandler:
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞."""

    def __init__(self, conversation: ConversationStorageProtocol) -> None:
        self.conversation: ConversationStorageProtocol = conversation

    async def start(self, message: Message) -> None:
        """–ö–æ–º–∞–Ω–¥–∞ /start - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ."""
        if message.from_user is None:
            return
        logger.info(f"Command /start from user {message.from_user.id}")
        welcome_text = (
            "üëã –ü—Ä–∏–≤–µ—Ç! –Ø —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥ –Ω–∞ –±–∞–∑–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞.\n\n"
            "–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ —Å:\n"
            "‚Ä¢ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è–º–∏ –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –ø–∏—Ç–∞–Ω–∏—è\n"
            "‚Ä¢ –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º —Ä–∞—Ü–∏–æ–Ω–æ–≤\n"
            "‚Ä¢ –í—ã–±–æ—Ä–æ–º –ø—Ä–æ–¥—É–∫—Ç–æ–≤\n"
            "‚Ä¢ –û—Ç–≤–µ—Ç–∞–º–∏ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –¥–∏–µ—Ç–∞—Ö\n"
            "‚Ä¢ –†–∞–∑–±–æ—Ä–æ–º —Å–æ—Å—Ç–∞–≤–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤\n\n"
            "–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ –º–Ω–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å, –∏ —è –æ—Ç–≤–µ—á—É!\n\n"
            "–ò—Å–ø–æ–ª—å–∑—É–π /help —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã "
            "–∏–ª–∏ /role —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ –º–æ–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö."
        )
        await message.answer(welcome_text)

    async def help(self, message: Message) -> None:
        """–ö–æ–º–∞–Ω–¥–∞ /help - —Å–ø—Ä–∞–≤–∫–∞."""
        if message.from_user is None:
            return
        logger.info(f"Command /help from user {message.from_user.id}")
        help_text = (
            "üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n\n"
            "/start - –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\n"
            "/help - –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ\n"
            "/role - –£–∑–Ω–∞—Ç—å –æ –º–æ–µ–π —Ä–æ–ª–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö\n"
            "/clear –∏–ª–∏ /new - –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞\n\n"
            "üí¨ –ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å –º–Ω–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤–æ–ø—Ä–æ—Å–æ–º –æ –ø–∏—Ç–∞–Ω–∏–∏, –∏ —è –æ—Ç–≤–µ—á—É!\n"
            "–Ø –ø–æ–º–Ω—é –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞—à–µ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞."
        )
        await message.answer(help_text)

    async def clear(self, message: Message) -> None:
        """–ö–æ–º–∞–Ω–¥–∞ /clear - –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏."""
        if message.from_user is None:
            return
        logger.info(f"Command /clear from user {message.from_user.id} in chat {message.chat.id}")
        self.conversation.clear_history(message.from_user.id, message.chat.id)
        await message.answer("‚úÖ –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ –æ—á–∏—â–µ–Ω–∞. –ù–∞—á–Ω—ë–º —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞!")

    async def role(self, message: Message) -> None:
        """–ö–æ–º–∞–Ω–¥–∞ /role - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–æ–ª–∏ –±–æ—Ç–∞."""
        if message.from_user is None:
            return
        logger.info(f"Command /role from user {message.from_user.id}")
        role_text = (
            "üë®‚Äç‚öïÔ∏è –ú–æ—è —Ä–æ–ª—å: –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥\n\n"
            "–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ —Å:\n"
            "‚Ä¢ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è–º–∏ –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –ø–∏—Ç–∞–Ω–∏—è\n"
            "‚Ä¢ –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–∞—Ü–∏–æ–Ω–æ–≤\n"
            "‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –ø–æ –≤—ã–±–æ—Ä—É –ø—Ä–æ–¥—É–∫—Ç–æ–≤\n"
            "‚Ä¢ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ–º –ø–æ–ª—å–∑—ã –∏ –≤—Ä–µ–¥–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤\n"
            "‚Ä¢ –û—Ç–≤–µ—Ç–∞–º–∏ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –¥–∏–µ—Ç–∞—Ö –∏ —Å–∏—Å—Ç–µ–º–∞—Ö –ø–∏—Ç–∞–Ω–∏—è\n"
            "‚Ä¢ –†–∞–∑–±–æ—Ä–æ–º —Å–æ—Å—Ç–∞–≤–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ —ç—Ç–∏–∫–µ—Ç–æ–∫\n"
            "‚Ä¢ –°–æ–≤–µ—Ç–∞–º–∏ –ø–æ —Ä–µ–∂–∏–º—É –ø–∏—Ç–∞–Ω–∏—è\n\n"
            "–Ø –æ—Å–Ω–æ–≤—ã–≤–∞—é—Å—å –Ω–∞ –Ω–∞—É—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω–æ–π –º–µ–¥–∏—Ü–∏–Ω–µ. "
            "–ü—Ä–∏ —Å–µ—Ä—å–µ–∑–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–æ –∑–¥–æ—Ä–æ–≤—å–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –≤—Ä–∞—á–∞."
        )
        await message.answer(role_text)
